!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.CarouselMobile=t()}("undefined"!=typeof self?self:this,function(){"use strict";var o={CAROUSEL_WRAP:"#carouselWrap"},t="carousel-wrap",a="carousel-image";function e(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}var r=function(e,t){var r=this;!function(e,t,r){for(var s in t)!t.hasOwnProperty(s)||e.hasOwnProperty(s)&&!r||(e[s]=t[s])}(this.carouselOptions,t,!0),r.carousel=document.querySelector(e),r.carousel.appendChild(r.getImgs()),r.carouselWrap=document.querySelector(o.CAROUSEL_WRAP);var s=setInterval(function(){r.isCarouselComplete()&&(clearInterval(s),r.initCarousel())},50)};return r.prototype={carouselOptions:{carouselInterval:3e3,carouselDuration:300},isCarouselComplete:function(){for(var e=0,t=0;t<this.carouselWrap.children.length;t++)this.carouselWrap.children[t].complete&&e++;return e===this.carouselWrap.children.length},initCarousel:function(e,t){this.carouselCount=this.carouselWrap.children.length,this.setCarousel(),this.carouselIndex=1,this.carouselIntervalr=null,this.isCarouselAnimate=!1,this.carouselTouch={startX:0,start:0,move:0,end:0,offset:.3},this.bindCarousel(),this.playCarousel()},setCarousel:function(){var e=this,t=e.carouselWrap.children[0].cloneNode(!0),r=e.carouselWrap.children[e.carouselCount-1].cloneNode(!0);e.carouselWrap.insertBefore(r,e.carouselWrap.children[0]),e.carouselWrap.appendChild(t),e.carouselWidth=e.getCarouselWidth(),e.setTransform(e.carouselWrap,-e.carouselWidth)},getCarouselWidth:function(){return parseInt(this.carousel.offsetWidth)},setTransition:function(e,t){e.style.transition=t+"ms"},setTransform:function(e,t){e.style.transform="translate3d("+t+"px, 0px, 0px)",e.style["-webkit-transform"]="translate3d("+t+"px, 0px, 0px)",e.style["-ms-transform"]="translate3d("+t+"px, 0px, 0px)"},getTransform:function(){var e=this.carouselWrap.style.transform||this.carouselWrap.style["-webkit-transform"]||this.carouselWrap.style["-ms-transform"];return e=(e=e.substring(12)).match(/(\S*)px/)[1],Number(e)},getImgs:function(){var e=document.createElement("div");e.setAttribute("class",t),e.setAttribute("id",o.CAROUSEL_WRAP.substring(1,o.CAROUSEL_WRAP.length));var r=document.createDocumentFragment(),s=document.createElement("img");return this.carouselOptions.carouselImages.forEach(function(e,t){(s=s.cloneNode(!1)).setAttribute("class",a),s.setAttribute("src",e),s.setAttribute("alt",t+1),r.appendChild(s)}),e.appendChild(r),e},playCarousel:function(){var e=this;this.carouselIntervalr&&clearInterval(this.carouselIntervalr),this.carouselIntervalr=window.setInterval(function(){e.nextCarousel()},this.carouselOptions.carouselInterval)},bindCarousel:function(){var r=this;e(this.carousel,"touchstart",function(e){r.isCarouselAnimate||(clearInterval(r.carouselIntervalr),r.carouselTouch.startX=r.getTransform(),r.carouselTouch.start=e.changedTouches[e.changedTouches.length-1].clientX)}),e(this.carousel,"touchmove",function(e){r.isCarouselAnimate||-1==r.carouselTouch.start||(clearInterval(r.carouselIntervalr),r.carouselTouch.move=e.changedTouches[e.changedTouches.length-1].clientX-r.carouselTouch.start,r.setTransform(r.carouselWrap,r.carouselTouch.move+r.carouselTouch.startX))}),e(this.carousel,"touchend",function(e){if(!r.isCarouselAnimate&&-1!=r.carouselTouch.start){clearInterval(r.carouselIntervalr),r.setTransform(r.carouselWrap,r.carouselTouch.move+r.carouselTouch.startX);var t=r.getTransform();t+=0<r.carouselTouch.move?r.carouselWidth*r.carouselTouch.offset:r.carouselWidth*-r.carouselTouch.offset,r.carouselIndex=-1*Math.round(t/r.carouselWidth),r.moveCarousel(r.carouselIndex*-r.carouselWidth),r.carouselIndex>r.carouselCount&&(r.carouselIndex=1),r.carouselIndex<1&&(r.carouselIndex=r.carouselCount),r.playCarousel()}}),e(document,"visibilitychange",function(e){document.hidden?clearInterval(r.carouselIntervalr):r.playCarousel()})},nextCarousel:function(){this.isCarouselAnimate||(this.carouselIndex++,this.carouselIndex>this.carouselCount&&(this.carouselIndex=1),this.moveCarousel(this.getTransform()-this.carouselWidth))},moveCarousel:function(e){this.isCarouselAnimate=!0,this.setTransition(this.carouselWrap,this.carouselOptions.carouselDuration),this.setTransform(this.carouselWrap,e),this.resetCarousel(e)},resetCarousel:function(e){var t=this;window.setTimeout(function(){t.resetMoveCarousel(e),t.isCarouselAnimate=!1},t.carouselOptions.carouselDuration)},resetMoveCarousel:function(e){this.setTransition(this.carouselWrap,0),this.setTransform(this.carouselWrap,e),e>-this.carouselWidth&&this.setTransform(this.carouselWrap,-this.carouselCount*this.carouselWidth),e<-this.carouselWidth*this.carouselCount&&this.setTransform(this.carouselWrap,-this.carouselWidth)},constructor:r},r});